<!DOCTYPE HTML>
<html>
<head>
  <title>StockMarket Chart</title>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
  <link href='style/main.css' rel='stylesheet' type='text/css'>
  <link href='style/mfglabs_iconset.css' rel='stylesheet' type='text/css'>
  <script src='scripts/socket.io.js' type='text/javascript'></script>
  <script type="text/javascript">
  window.onload = function () {
    var socket = io();

    socket.on('stock change', function(stocks) {
      console.log(stocks);
    });

    socket.on('stock error', function(error) {
      
    });

    document.getElementById('addStock').addEventListener('submit', function(e) {
      e.preventDefault();

      socket.emit('stock add', document.getElementById('stockCode').value);
      return false;
    });

		var chart = new CanvasJS.Chart("chartContainer",
		{
			title:{
				text: "Stocks",
				fontSize: 30
			},
      animationEnabled: true,
			axisX:{
				gridColor: "silver",
				tickColor: "silver",
				valueFormatString: "DD/MMM"
			},
      toolTip:{
        shared:true
      },
			theme: "theme1",
			axisY: {
				gridColor: "silver",
				tickColor: "silver"
			},
			legend:{
        verticalAlign: "center",
			  horizontalAlign: "right"
			},
			data: [
			{
				type: "line",
				showInLegend: true,
				lineThickness: 2,
				name: "Visits",
				markerType: "square",
				color: "#F08080",
				dataPoints: [
				{ x: new Date(2010,0,3), y: 650 },
				{ x: new Date(2010,0,5), y: 700 },
				{ x: new Date(2010,0,7), y: 710 },
				{ x: new Date(2010,0,9), y: 658 },
				{ x: new Date(2010,0,11), y: 734 },
				{ x: new Date(2010,0,13), y: 963 },
				{ x: new Date(2010,0,15), y: 847 },
				{ x: new Date(2010,0,17), y: 853 },
				{ x: new Date(2010,0,19), y: 869 },
				{ x: new Date(2010,0,21), y: 943 },
				{ x: new Date(2010,0,23), y: 970 }
				]
			},
			{
				type: "line",
				showInLegend: true,
				name: "Unique Visits",
				color: "#20B2AA",
				lineThickness: 2,

				dataPoints: [
				{ x: new Date(2010,0,3), y: 510 },
				{ x: new Date(2010,0,5), y: 560 },
				{ x: new Date(2010,0,7), y: 540 },
				{ x: new Date(2010,0,9), y: 558 },
				{ x: new Date(2010,0,11), y: 544 },
				{ x: new Date(2010,0,13), y: 693 },
				{ x: new Date(2010,0,15), y: 657 },
				{ x: new Date(2010,0,17), y: 663 },
				{ x: new Date(2010,0,19), y: 639 },
				{ x: new Date(2010,0,21), y: 673 },
				{ x: new Date(2010,0,23), y: 660 }
				]
			}
			],
      legend:{
        cursor:"pointer",
        itemclick:function(e){
          if (typeof(e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
            e.dataSeries.visible = false;
          }
          else{
            e.dataSeries.visible = true;
          }
          chart.render();
        }
      }
		});
    chart.render();
}
</script>
<script type="text/javascript" src="/scripts/canvasjs.min.js"></script>
</head>
<body>
  <h1>StockMarket Chart</h1>
	<div id="chartContainer"></div>
  <div class="companies">
    <div class="comp">
      <h2>GOOG</h2>
      <i class="icon-cross_mark"></i>
      <p>Data for   Alphabet Inc.</p>
    </div>
    <div class="comp">
      <h2>Add New</h2>
      <form id='addStock'>
        <input id='stockCode' name'code' type='text' placeholder='Stock Code'>
        <input type='submit' value='Add'>
      </form>
    </div>
  </div>
</body>
  </html>
